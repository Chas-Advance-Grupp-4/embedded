idf_component_register(
    SRCS "RestServer.cpp"
         "handlers/BaseHandler.cpp"
         "handlers/PostHandler.cpp"
         "handlers/GetHandler.cpp"
         "handlers/TimeHandler.cpp"
         "handlers/ConnectHandler.cpp"
         "handlers/PostexampleHandler.cpp"
         "handlers/HelloHandler.cpp"
    INCLUDE_DIRS "." "handlers"
    REQUIRES esp_https_server esp_wifi log nvs_flash unity time_sync_manager sensor_unit_manager json_parser
    EMBED_TXTFILES "server_cert.pem"
                   "server_key.pem"
    )

if(CONFIG_UNIT_TEST_ENABLED)
    set(TEST_SRCS handlers/test/test_hello_handler.cpp)
    idf_component_add_unit_test(rest_server_tests "${TEST_SRCS}")
endif()
